# [μ‹¤μµ] ν”λ΅μ› νν‹°μ…μ— λ©”μ‹μ§€λ¥Ό λ„£μΌλ©΄ μ–΄λ–»κ² λ κΉ?

λ¦¬λ” νν‹°μ…κ³Ό ν”λ΅μ› νν‹°μ…μ μ—­ν• μ„ μ΄ν•΄ν•κ³ , ν”λ΅μ› νν‹°μ…μ΄ μλ” λ…Έλ“λ΅ λ©”μ‹μ§€λ¥Ό λ³΄λƒμ„ λ• μΉ΄ν”„μΉ΄κ°€ μ–΄λ–»κ² λ™μ‘ν•λ”μ§€ μ‹¤μµμ„ ν†µν•΄ ν™•μΈν•λ‹¤.

---

## β… κ°μ”

μ΄μ „ μ•„ν‚¤ν…μ² κ°•μμ—μ„ λ‹¤μκ³Ό κ°™μ΄ ν•™μµν–λ‹¤.
> **λ¦¬λ” νν‹°μ…**μ€ ν”„λ΅λ“€μ„λ‚ μ»¨μλ¨Έκ°€ μ§μ ‘μ μΌλ΅ λ©”μ‹μ§€λ¥Ό μ“°κ³  μ½λ” νν‹°μ…μ΄λ‹¤. λ°λ©΄μ— **ν”λ΅μ› νν‹°μ…**μ€ ν”„λ΅λ“€μ„λ‚ μ»¨μλ¨Έκ°€ μ§μ ‘μ μΌλ΅ λ©”μ‹μ§€λ¥Ό μ“°κ³  μ½μ§€ μ•λ”λ‹¤.

κ·Έλ ‡λ‹¤λ©΄, μ‹¤μ λ΅ ν”λ΅μ› νν‹°μ…μ„ κ°€μ§€κ³  μλ” λ…Έλ“μ— λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ©΄ μ—λ¬κ°€ λ‚ κΉ? μ•„λ‹λ©΄ μ •μƒμ μΌλ΅ μ²λ¦¬λ κΉ? μ‹¤μµμ„ ν†µν•΄ μ•μ•„λ³΄μ.

---

## β… μ‹¤μµ κ³Όμ •

### 1. λ¦¬λ” νν‹°μ… μ„μΉ ν™•μΈ
λ¨Όμ € `email.send` ν† ν”½μ λ¦¬λ” νν‹°μ…μ΄ μ–΄λ λ…Έλ“μ— μλ”μ§€ ν™•μΈν•λ‹¤.

```bash
$ bin/kafka-topics.sh \
    --bootstrap-server localhost:9092 \
    --describe \
    --topic email.send
```

**[μ‹¤ν–‰ κ²°κ³Ό μμ‹]**
```text
Topic: email.send  Partition: 0  Leader: 1  Replicas: 1, 2, 3  Isr: 1, 2, 3
```
* μ„ μμ‹μ—μ„λ” **λ…Έλ“ 1(9092)**μ΄ λ¦¬λ”λ‹¤. λ”°λΌμ„ **λ…Έλ“ 2(19092)**μ™€ **λ…Έλ“ 3(29092)**μ€ ν”λ΅μ› νν‹°μ…μ„ κ°€μ§€κ³  μλ‹¤.

### 2. ν”λ΅μ› νν‹°μ… λ…Έλ“μ— λ©”μ‹μ§€ μ „μ†΅
λ¦¬λ”κ°€ μ•„λ‹ **λ…Έλ“ 2(19092)**λ¥Ό λ€μƒμΌλ΅ ν”„λ΅λ“€μ„λ¥Ό μ‹¤ν–‰ν•μ—¬ λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ³Έλ‹¤.

```bash
$ bin/kafka-console-producer.sh \
    --bootstrap-server localhost:19092 \
    --topic email.send

# λ©”μ‹μ§€ μ…λ ¥
> follower-message-1
```

### 3. λ¨λ“  λ…Έλ“μ—μ„ λ©”μ‹μ§€ μ΅°ν
λ©”μ‹μ§€κ°€ μ •μƒμ μΌλ΅ λ¨λ“  λ…Έλ“μ— λ³µμ λμ—λ”μ§€ ν™•μΈν•κΈ° μ„ν•΄ κ° λ…Έλ“μ ν¬νΈλ΅ μ»¨μλ¨Έλ¥Ό μ‹¤ν–‰ν•΄λ³Έλ‹¤.

```bash
# λ…Έλ“ 1 (9092) ν™•μΈ
$ bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic email.send --from-beginning

# λ…Έλ“ 2 (19092) ν™•μΈ
$ bin/kafka-console-consumer.sh --bootstrap-server localhost:19092 --topic email.send --from-beginning

# λ…Έλ“ 3 (29092) ν™•μΈ
$ bin/kafka-console-consumer.sh --bootstrap-server localhost:29092 --topic email.send --from-beginning
```

---

## β… κ²°κ³Ό ν•΄μ„

μ‹¤μµ κ²°κ³Ό, λ¦¬λ” νν‹°μ…μ΄ μ•„λ‹ ν”λ΅μ› νν‹°μ…μ΄ μλ” λ…Έλ“(19092)μ— λ©”μ‹μ§€λ¥Ό λ„£λ”λΌλ„ **μ—λ¬ μ—†μ΄ μ λ“¤μ–΄κ°€λ” κ²ƒ**μ„ ν™•μΈν•  μ μλ‹¤. λν• λ¨λ“  λ…Έλ“μ—μ„ ν•΄λ‹Ή λ©”μ‹μ§€κ°€ μ΅°νλλ―€λ΅ λ³µμ λ„ μ •μƒμ μΌλ΅ μ΄λ£¨μ–΄μ΅λ‹¤.

### μ™ κ°€λ¥ν•κ°€μ”?
μΉ΄ν”„μΉ΄ ν”„λ΅λ“€μ„λ” λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄κΈ° μ „μ— **ν΄λ¬μ¤ν„°μ λ©”νƒ€λ°μ΄ν„°**λ¥Ό ν™•μΈν•μ—¬ ν•΄λ‹Ή νν‹°μ…μ λ¦¬λ”κ°€ λ„κµ¬μΈμ§€ μλ™μΌλ΅ νμ•…ν•λ‹¤.

1. ν”„λ΅λ“€μ„κ°€ μ•„λ¬΄ λ…Έλ“(μ: 19092)μ— μ ‘μ†ν•μ—¬ "μ΄ ν† ν”½μ λ¦¬λ”κ°€ λ„κµ¬λ‹?"λΌκ³  λ¬»λ”λ‹¤.
2. μΉ΄ν”„μΉ΄ λ…Έλ“λ“¤μ€ μ„λ΅ μ—°λ™λμ–΄ μ •λ³΄λ¥Ό κ³µμ ν•κ³  μμΌλ―€λ΅, "λ¦¬λ”λ” 1λ² λ…Έλ“μ•Ό"λΌκ³  λ‹µν•΄μ¤€λ‹¤.
3. ν”„λ΅λ“€μ„λ” μ΄ μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ **μ‹¤μ  λ©”μ‹μ§€λ¥Ό λ¦¬λ” νν‹°μ…μ΄ μλ” λ…Έλ“(9092)λ΅ μ¬μ „μ†΅**ν•λ‹¤.

μ¦‰, μ°λ¦¬κ°€ 19092 ν¬νΈλ΅ λ©”μ‹μ§€λ¥Ό λ³΄λƒλ”λΌλ„ λ‚΄λ¶€μ μΌλ΅λ” λ¦¬λ” νν‹°μ…μΈ 9092λ΅ μ „λ‹¬λμ–΄ μ²λ¦¬λ κ²ƒμ΄λ‹¤. μ΄ κ³Όμ •μ€ μΉ΄ν”„μΉ΄ ν΄λΌμ΄μ–ΈνΈ λΌμ΄λΈλ¬λ¦¬ λ‚΄μ—μ„ **μλ™μΌλ΅ μ²λ¦¬**λλ―€λ΅ μ‚¬μ©μλ” λ¦¬λ”μ μ„μΉλ¥Ό λ§¤λ² μ‹ κ²½ μ“°μ§€ μ•μ•„λ„ λλ‹¤.

---

## π“ λ™μ‘ μ›λ¦¬ μ‹κ°ν™”

```mermaid
sequenceDiagram
    participant P as ν”„λ΅λ“€μ„ (Producer)
    participant N2 as λ…Έλ“ 2 (ν”λ΅μ›)
    participant N1 as λ…Έλ“ 1 (λ¦¬λ”)

    P->>N2: λ©”μ‹μ§€ μ „μ†΅ μ‹λ„ (19092)
    Note over N2: "λ‚ λ¦¬λ” μ•„λ‹μ•Ό, 1λ² λ…Έλ“κ°€ λ¦¬λ”μ•Ό"
    N2-->>P: λ¦¬λ” μ •λ³΄ μ „λ‹¬ (Metadata)
    P->>N1: μ‹¤μ  λ©”μ‹μ§€ μ „μ†΅ (9092)
    Note over N1: λ©”μ‹μ§€ μ €μ¥ λ° ν”λ΅μ›μ—κ² λ³µμ 
```
